{"version":3,"sources":["scripts/script.js"],"names":["basket","document","querySelector","clearBasket","basketList","basketBlock","clearBtnBlock","basketEmptyClass","basletCountClass","products","getProduct","length","showBtnBlock","product","createBasketBlock","createEmptyBasket","addEventListener","basketDeleteBtn","clearBasketBtn","showBasket","text","listElement","createElement","appendChild","deleteBasketAll","querySelectorAll","i","remove","show","style","display","tag","classList","attributes","element","add","innerText","attr","setAttribute","name","value","imgItem","img","nameItem","pricesBlock","currentPriceItem","currentPrice","oldPriceItem","oldPrice","coutnItem","count","id","addItemToBasket","setProductInfo","emptyBlock","basketItem","setProductCount","basketElement","parent","key","undefined","push","getAttribute","setProduct","slice","clearBtn","console","log","localStorage","setItem","JSON","stringify","result","getItem","parse"],"mappings":"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","file":"script.a6e1fada.js","sourceRoot":"..\\src","sourcesContent":["'use strict'\r\n\r\nconst basket = document.querySelector('#basketBtn');\r\nconst clearBasket = document.querySelector('#clearBasket');\r\nconst basketList = document.querySelector('.basket_list');\r\nconst basketBlock = document.querySelector('.basket')\r\nconst clearBtnBlock = document.querySelector('.basket_btn');\r\nconst basketEmptyClass = 'basket_list__empty';\r\nconst basletCountClass = 'basket_list__item_count';\r\n\r\nlet products = getProduct();\r\n\r\nif (products.length) {\r\n    showBtnBlock(true);\r\n\r\n    for (let product of products) {\r\n        createBasketBlock(product);\r\n    }\r\n\r\n} else {\r\n    showBtnBlock(false);\r\n    createEmptyBasket();\r\n}\r\n\r\nclearBasket.addEventListener('click', () => {\r\n    basketDeleteBtn();\r\n    clearBasketBtn();\r\n});\r\n\r\nbasket.addEventListener('click', () => showBasket());\r\n\r\nfunction createEmptyBasket() {\r\n    const text = 'В корзине пока ничего нет.';\r\n    const listElement = createElement('li', basketEmptyClass, text);\r\n\r\n    basketList.appendChild(listElement);\r\n}\r\n\r\nfunction basketDeleteBtn() {\r\n    let deleteBasketAll = document.querySelectorAll('.basket_list__item');\r\n\r\n    for (let i = 0; i < deleteBasketAll.length; i++) {\r\n        deleteBasketAll[i].remove();\r\n    }\r\n}\r\n\r\nfunction showBtnBlock(show) {\r\n    show ? clearBtnBlock.style.display = '' : clearBtnBlock.style.display = 'none';\r\n}\r\n\r\nfunction createElement(tag, classList = '', text = '', attributes = []) {\r\n    const element = document.createElement(tag);\r\n\r\n    if (classList.length) {\r\n        element.classList.add(classList);\r\n    }\r\n \r\n    if (text.length) {\r\n        element.innerText = text;\r\n    }\r\n\r\n    for (let attr of attributes) {\r\n        element.setAttribute(attr.name, attr.value);\r\n    }\r\n    \r\n    return element;\r\n}\r\n\r\nfunction createBasketBlock(product) {\r\n    const imgItem = createElement('img', 'basket_list__item_img', '', [{name: 'src', value: product.img}]);\r\n    const nameItem = createElement('p', 'basket_list__item_name', product.name);\r\n    const pricesBlock = createElement('div', 'basket_list__item_info');\r\n    const currentPriceItem = createElement('span', 'basket_list__item_info_price', product.currentPrice);\r\n    const oldPriceItem = createElement('del', '', product.oldPrice);\r\n    const coutnItem = createElement('span', basletCountClass, `${product.count} шт.`);\r\n    const basketBlock = createElement('li', 'basket_list__item', '', [{name: 'id', value: `product_${product.id}`}]);\r\n\r\n    pricesBlock.appendChild(currentPriceItem);\r\n    pricesBlock.appendChild(oldPriceItem);\r\n\r\n    basketBlock.appendChild(imgItem);\r\n    basketBlock.appendChild(nameItem);\r\n    basketBlock.appendChild(coutnItem);\r\n    basketBlock.appendChild(pricesBlock);\r\n\r\n    basketList.appendChild(basketBlock);\r\n}\r\n\r\nfunction addItemToBasket(id) {\r\n    let product = setProductInfo(id);\r\n    let emptyBlock = document.querySelector(`.${basketEmptyClass}`);\r\n    let basketItem = document.querySelector(`#product_${product.id}`);\r\n\r\n    if (emptyBlock !== null) {\r\n        emptyBlock.remove();\r\n        showBtnBlock();\r\n    }\r\n\r\n    if (basketItem === null) {\r\n        createBasketBlock(product);\r\n\r\n    } else {\r\n        setProductCount(basketItem, product.count);\r\n    }\r\n    \r\n}\r\n\r\nfunction setProductCount(basketElement, count) {\r\n    let element = basketElement.querySelector(`.${basletCountClass}`);\r\n    \r\n    element.innerText = count + `шт.`; \r\n}\r\n\r\nfunction setProductInfo(id) {\r\n    let parent = document.querySelector(`#cardProduct_${id}`);\r\n    let key;\r\n\r\n    for (let i in products) {\r\n        if (id === products[i].id) {\r\n            key = i;\r\n            break;\r\n        }\r\n    }\r\n\r\n    if (key === undefined) {\r\n        products.push({\r\n            img: parent.querySelector('img').getAttribute('src'),\r\n            currentPrice: parent.querySelector('.goods-info__price_now').innerText,\r\n            oldPrice: parent.querySelector('.goods-info__price_last').innerText,\r\n            name: parent.querySelector('.goods-info__description').innerText,\r\n            id: id,\r\n            count: 1\r\n        });\r\n\r\n        key = -1;\r\n\r\n    } else {\r\n        products[key].count++;\r\n    }\r\n\r\n    setProduct();\r\n\r\n    return products.slice(key)[0];\r\n}\r\n\r\nfunction clearBasketBtn() {\r\n    let clearBtn = clearBtnBlock.style.display;\r\n\r\n    if (clearBtn.setAttribute === 'block') {\r\n        clearBtnBlock.style.display = 'none'\r\n    }\r\n}\r\n\r\nfunction showBasket() {\r\n    let display = basketBlock.style.display;\r\n    console.log(display);\r\n    display === 'block' ? basketBlock.style.display = 'none' : basketBlock.style.display = 'block';\r\n}\r\n\r\nfunction setProduct() {\r\n    localStorage.setItem('products', JSON.stringify(products));\r\n}\r\n\r\nfunction getProduct() {\r\n    let result = localStorage.getItem('products') ? JSON.parse(localStorage.getItem('products')) : [];\r\n    \r\n    return result;\r\n}\r\n\r\nexport { addItemToBasket };"]}